define("apps/websockets/app",["require","jquery","lodash","monster","toastr"],function(n){var e=n("jquery"),t=n("lodash"),a=n("monster");n("toastr");return{name:"websockets",css:["app"],i18n:{"en-US":{customCss:!1}},requests:{},subscribe:{},appFlags:{},load:function(n){var e=this;e.initApp(function(){n&&n(e)})},initApp:function(n){var e=this;a.pub("auth.initApp",{app:e,callback:n})},render:function(n){var e=this,t={tabs:[{text:e.i18n.active().websockets.dashboard.title,callback:e.renderDashboard},{text:e.i18n.active().websockets.debug.title,callback:e.renderDebug}]},l={pull:"right",tabs:[{text:e.i18n.active().websockets.sampleCode.title,callback:e.renderSampleCode}]};e.getActiveSockets(function(n){a.ui.generateAppLayout(e,{appName:e.i18n.active().websockets.appName,menus:[t,l]})})},renderDashboard:function(n){var t=this,l=n||{},s=l.container||e("#websockets_app_container .app-content-wrapper");t.getDashboardData(function(n){var l=e(a.template(t,"dashboard",{isEmpty:0===n.length,sockets:n}));a.ui.tooltips(l,{options:{container:"body"}}),a.ui.footable(l.find(".footable")),t.bindEventsDashboard(l),s.empty().append(l).fadeIn()})},activateTab:function(n,t,a){var l=e("#websockets_app_container"),s=e(l.find('.navbar-menu[data-menu_id="'+n+'"] .navbar-menu-item-link[data-tab_id="'+t+'"]'));s.hasClass("active")||(l.find(".navbar-menu-item-link").removeClass("active"),s.addClass("active"),e("#websockets_app_container .app-content-wrapper").fadeOut(200,a))},bindEventsDashboard:function(n){var t=this;n.find(".go-to-intro-link").on("click",function(){t.activateTab(1,0,function(){t.renderSampleCode()})}),n.find(".event-name").on("click",function(){var n=e(this);t.activateTab(0,1,function(){t.renderDebug({event:n.data("event")})})})},getDashboardData:function(n){var e=this;if(e.appFlags.hasInitData){var t=e.formatDashboardData(e.appFlags.websockets);e.appFlags.hasInitData=!1,delete e.appFlags.websockets,n&&n(t)}else e.getActiveSockets(function(t){var t=e.formatDashboardData(t);n&&n(t)})},formatDashboardData:function(n){return t.each(n,function(n){n.parsedMetadata="",n.hasOwnProperty("metadata")&&a.util.isJSON(n.metadata)&&(n.parsedMetadata=JSON.stringify(n.metadata))}),n},handleCustomEvents:function(n,e,a){var l=this;if(e&&!function(n,e){var a=!1;return t.each(e,function(e){t.each(e,function(e){e.binding===n&&(a=!0)})}),a}(e,a)){var s=l.debugRemoveOption(n,e),i={binding:e};s?(i.id=s.id,i.name=s.name,i.friendlyName=s.friendlyName):(i.id=e,i.name=e,i.friendlyName=e),l.debugAddCustomEventTemplate(n,i)}else l.debugAddEmptyCustomTemplate(n)},renderDebug:function(n){var t=this,l=n||{},s=l.container||e("#websockets_app_container .app-content-wrapper");t.getDebugData(function(n){var i=n;l.hasOwnProperty("event")&&(i.activeEvent=l.event);var o=e(a.template(t,"debug",i));t.handleCustomEvents(o,i.activeEvent,i.events),t.bindEventsDebug(o),s.empty().append(o).fadeIn(),l.hasOwnProperty("event")&&t.listenEvent(o,l.event)})},debugAddConferenceEvent:function(n,e){n.indexOf("conference.command")>=0||n.indexOf("conference.event")},debugAddCustomEventTemplate:function(n,e){var t=this;n.find(".custom-events-wrapper .events").append(a.template(t,"debug-customEvent",{binding:e.binding,id:e.id,friendlyName:e.friendlyName,name:e.name}))},debugAddEmptyCustomTemplate:function(n){var e=this;n.find(".custom-events-wrapper .events").append(a.template(e,"debug-customEventEmpty"))},getDebugData:function(n){var e=this;a.parallel({events:function(n){e.getEvents(function(e){n&&n(null,e)})},conferences:function(n){e.callApi({resource:"conference.list",data:{accountId:e.accountId},success:function(e){n&&n(null,e.data)}})}},function(t,a){var l=e.formatDebugData(a);n&&n(l)})},formatDebugData:function(n){return{events:n.events,conferences:n.conferences}},debugAddCustomEvents:function(n,e,t,a,l){var s=this;s.listenEvent(n,e,!0),n.find(".custom-events-wrapper .events .empty").remove(),s.debugAddCustomEventTemplate(n,{binding:e,id:t,friendlyName:l,name:a})},bindEventsDebug:function(n){var t=this;a.ui.tooltips(n,{options:{container:"body"}}),n.find(".select-conference").chosen({search_contains:!0,width:"160px",placeholder_text_single:t.i18n.active().websockets.debug.customEvents.selectConference}),n.find(".select-conference").on("change",function(){var a=e(this),l=a.find("option:selected"),s=a.parents(".event"),i=s.data("binding-before")+a.val();s.data("binding-after")&&(i+=s.data("binding-after")),t.debugAddCustomEvents(n,i,a.val(),l.data("name"),l.data("friendly-name")),l.remove(),e(this).val("").trigger("chosen:updated")}),n.find(".event.clickable").on("click",function(){var a=e(this);a.hasClass("active")?t.muteEvent(a.data("binding")):t.listenEvent(n,a.data("binding")),a.toggleClass("active")}),n.find(".custom-events-wrapper").on("click",".custom-event",function(){var a=e(this);t.muteEvent(a.data("binding")),t.debugCheckAppendOption(n,a),a.remove(),0===n.find(".custom-events-wrapper .custom-event").length&&t.debugAddEmptyCustomTemplate(n)})},debugCheckAppendOption:function(n,e){var t,l,s,i=this,o=e.data("binding"),c=e.data("id"),u=e.data("name");e.data("binding").indexOf("conference.command")>=0?(l="#select_conference_command",t=i.i18n.active().websockets.debug.customEvents.conferencesCommand):o.indexOf("conference.event")>=0&&(l="#select_conference_event",t=i.i18n.active().websockets.debug.customEvents.conferencesEvent),t&&(t+=" - "+u,s=a.template(i,"debug-customOption",{id:c,name:u,friendlyName:t}),n.find(l).append(s).trigger("chosen:updated"))},debugRemoveOption:function(n,e){var t,a,l=!1;if(e.indexOf("conference.command")>=0?(t="#select_conference_command",a=e.split(".")[2]):e.indexOf("conference.event")>=0&&(t="#select_conference_event",a=e.split(".")[2]),a){var s=n.find(t).find("option[value="+a+"]");s.length&&(l={id:a,name:s.data("name"),friendlyName:s.data("friendlyName")}),s.remove()}return l},listenEvent:function(n,t){var l=this,s=function(t,s){var i={binding:s,friendlyDate:a.util.toFriendlyDate(new Date)},o=e(a.template(l,"event-line",i));a.ui.renderJSON(t,o.find(".json-viewer")),n.find(".right-column").prepend(o)};l.subscribeWebSocket({binding:t,requiredElement:n,callback:function(n){s(n,t)}})},muteEvent:function(n){this.unsubscribeWebSocket({binding:n})},renderSampleCode:function(n){var t=this,l=n||{},s=l.container||e("#websockets_app_container .app-content-wrapper"),i=e(a.template(t,"sampleCode",!1,!1,!1,!0));t.bindEventsSampleCode(i),s.empty().append(i).fadeIn()},bindEventsSampleCode:function(n){a.ui.tooltips(n,{options:{container:"body"}})},getEvents:function(n){var e=this;e.appFlags.hasOwnProperty("events")?n&&n(e.appFlags.events):e.callApi({resource:"websockets.listEvents",data:{},success:function(t){e.appFlags.events=t.data,n&&n(e.appFlags.events)}})},getActiveSockets:function(n){var e=this;e.callApi({resource:"websockets.list",data:{accountId:e.accountId},success:function(e){n&&n(e.data)}})},listAccounts:function(n){var e=this;e.callApi({resource:"account.listDescendants",data:{accountId:e.accountId,filters:{paginate:!1}},success:function(e){e.data.push(a.apps.auth.originalAccount),n&&n(e.data)}})}}}),this.monster=this.monster||{},this.monster.cache=this.monster.cache||{},this.monster.cache.templates=this.monster.cache.templates||{},this.monster.cache.templates.websockets=this.monster.cache.templates.websockets||{},this.monster.cache.templates.websockets._main=this.monster.cache.templates.websockets._main||{},this.monster.cache.templates.websockets._main.dashboard=Handlebars.template({1:function(n,e,t,a,l){return" no-bg"},3:function(n,e,t,a,l){var s,i=n.lambda,o=n.escapeExpression;return'\t\t<table class="monster-table footable">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th data-type="html">'+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.debug:s)?s.table:s)?s.columns:s)?s.bindings:s,e))+'</th>\n\t\t\t\t\t<th data-breakpoints="xs">'+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.debug:s)?s.table:s)?s.columns:s)?s.sessionId:s,e))+"</th>\n\t\t\t\t\t<th>"+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.debug:s)?s.table:s)?s.columns:s)?s.sourceIP:s,e))+"</th>\n\t\t\t\t\t<th>"+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.debug:s)?s.table:s)?s.columns:s)?s.destinationIP:s,e))+"</th>\n\t\t\t\t\t<th>"+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.debug:s)?s.table:s)?s.columns:s)?s.timestamp:s,e))+"</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n"+(null!=(s=t.each.call(null!=e?e:n.nullContext||{},null!=e?e.sockets:e,{name:"each",hash:{},fn:n.program(4,l,0),inverse:n.noop,data:l}))?s:"")+"\t\t\t</tbody>\n\t\t</table>\n"},4:function(n,e,t,a,l){var s,i,o=null!=e?e:n.nullContext||{},c=t.helperMissing,u=n.escapeExpression;return"\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n"+(null!=(s=t.each.call(o,null!=e?e.bindings:e,{name:"each",hash:{},fn:n.program(5,l,0),inverse:n.noop,data:l}))?s:"")+"\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>"+u((i=null!=(i=t.websocket_session_id||(null!=e?e.websocket_session_id:e))?i:c,"function"==typeof i?i.call(o,{name:"websocket_session_id",hash:{},data:l}):i))+"</td>\n\t\t\t\t\t\t<td>"+u((i=null!=(i=t.source||(null!=e?e.source:e))?i:c,"function"==typeof i?i.call(o,{name:"source",hash:{},data:l}):i))+"</td>\n\t\t\t\t\t\t<td>"+u((i=null!=(i=t.destination||(null!=e?e.destination:e))?i:c,"function"==typeof i?i.call(o,{name:"destination",hash:{},data:l}):i))+"</td>\n\t\t\t\t\t\t<td>"+u((t.toFriendlyDate||e&&e.toFriendlyDate||c).call(o,null!=e?e.timestamp:e,{name:"toFriendlyDate",hash:{},data:l}))+"</td>\n\t\t\t\t\t</tr>\n"},5:function(n,e,t,a,l){var s=n.lambda,i=n.escapeExpression;return'\t\t\t\t\t\t\t\t<div><a class="monster-link blue event-name" data-event="'+i(s(e,e))+'">'+i(s(e,e))+"</a></div>\n"},7:function(n,e,t,a,l){var s,i=n.lambda,o=n.escapeExpression;return'\t\t<div class="empty-sockets">\n\t\t\t'+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.debug:s)?s.table:s)?s.empty:s,e))+'\n\n\t\t\t<a href="javascript:void(0);" class="go-to-intro-link">'+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.debug:s)?s.table:s)?s.goToIntroLink:s,e))+"</a>\n\t\t</div>\n"},compiler:[7,">= 4.0.0"],main:function(n,e,t,a,l){var s,i=null!=e?e:n.nullContext||{};return'<div class="dashboard-container app-content'+(null!=(s=t.unless.call(i,null!=e?e.isEmpty:e,{name:"unless",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l}))?s:"")+'">\n'+(null!=(s=t.unless.call(i,null!=e?e.isEmpty:e,{name:"unless",hash:{},fn:n.program(3,l,0),inverse:n.program(7,l,0),data:l}))?s:"")+"</div>\n\n"},useData:!0}),this.monster.cache.templates.websockets._main["debug-customEvent"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(n,e,t,a,l){var s,i=null!=e?e:n.nullContext||{},o=t.helperMissing,c="function",u=n.escapeExpression;return'<div class="custom-event event active" data-binding="'+u((s=null!=(s=t.binding||(null!=e?e.binding:e))?s:o,typeof s===c?s.call(i,{name:"binding",hash:{},data:l}):s))+'" data-id="'+u((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===c?s.call(i,{name:"id",hash:{},data:l}):s))+'" data-name="'+u((s=null!=(s=t.name||(null!=e?e.name:e))?s:o,typeof s===c?s.call(i,{name:"name",hash:{},data:l}):s))+'" data-friendly-name="'+u((s=null!=(s=t.friendlyName||(null!=e?e.friendlyName:e))?s:o,typeof s===c?s.call(i,{name:"friendlyName",hash:{},data:l}):s))+'">\n\t<span class="icons"><i class="stop-icon fa fa-bell"></i></span>\n\t<span class="name">'+u((s=null!=(s=t.friendlyName||(null!=e?e.friendlyName:e))?s:o,typeof s===c?s.call(i,{name:"friendlyName",hash:{},data:l}):s))+"</span>\n</div>"},useData:!0}),this.monster.cache.templates.websockets._main["debug-customEventEmpty"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(n,e,t,a,l){var s;return'<div class="empty">\n\t'+n.escapeExpression(n.lambda(null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.debug:s)?s.customEvents:s)?s.none:s,e))+"\n</div>"},useData:!0}),this.monster.cache.templates.websockets._main["debug-customOption"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(n,e,t,a,l){var s,i=null!=e?e:n.nullContext||{},o=t.helperMissing,c=n.escapeExpression;return'<option value="'+c((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,"function"==typeof s?s.call(i,{name:"id",hash:{},data:l}):s))+'" data-name="'+c((s=null!=(s=t.name||(null!=e?e.name:e))?s:o,"function"==typeof s?s.call(i,{name:"name",hash:{},data:l}):s))+'" data-friendly-name="'+c((s=null!=(s=t.friendlyName||(null!=e?e.friendlyName:e))?s:o,"function"==typeof s?s.call(i,{name:"friendlyName",hash:{},data:l}):s))+'">'+c((s=null!=(s=t.name||(null!=e?e.name:e))?s:o,"function"==typeof s?s.call(i,{name:"name",hash:{},data:l}):s))+"</option>"},useData:!0}),this.monster.cache.templates.websockets._main.debug=Handlebars.template({1:function(n,e,t,a,l){var s,i,o=null!=e?e:n.nullContext||{},c=t.helperMissing,u=n.escapeExpression;return'\t\t\t\t\t\t\t<option value="'+u((i=null!=(i=t.id||(null!=e?e.id:e))?i:c,"function"==typeof i?i.call(o,{name:"id",hash:{},data:l}):i))+'" data-name="'+u((i=null!=(i=t.name||(null!=e?e.name:e))?i:c,"function"==typeof i?i.call(o,{name:"name",hash:{},data:l}):i))+'" data-friendly-name="'+u(n.lambda((s=(s=(s=(s=(s=l&&l.root)&&s.i18n)&&s.websockets)&&s.debug)&&s.customEvents)&&s.conferencesCommand,e))+" - "+u((i=null!=(i=t.name||(null!=e?e.name:e))?i:c,"function"==typeof i?i.call(o,{name:"name",hash:{},data:l}):i))+'">'+u((i=null!=(i=t.name||(null!=e?e.name:e))?i:c,"function"==typeof i?i.call(o,{name:"name",hash:{},data:l}):i))+"</option>\n"},3:function(n,e,t,a,l){var s,i,o=null!=e?e:n.nullContext||{},c=t.helperMissing,u=n.escapeExpression;return'\t\t\t\t\t\t\t<option value="'+u((i=null!=(i=t.id||(null!=e?e.id:e))?i:c,"function"==typeof i?i.call(o,{name:"id",hash:{},data:l}):i))+'" data-name="'+u((i=null!=(i=t.name||(null!=e?e.name:e))?i:c,"function"==typeof i?i.call(o,{name:"name",hash:{},data:l}):i))+'" data-friendly-name="'+u(n.lambda((s=(s=(s=(s=(s=l&&l.root)&&s.i18n)&&s.websockets)&&s.debug)&&s.customEvents)&&s.conferencesEvent,e))+" - "+u((i=null!=(i=t.name||(null!=e?e.name:e))?i:c,"function"==typeof i?i.call(o,{name:"name",hash:{},data:l}):i))+'">'+u((i=null!=(i=t.name||(null!=e?e.name:e))?i:c,"function"==typeof i?i.call(o,{name:"name",hash:{},data:l}):i))+"</option>\n"},5:function(n,e,t,a,l){var s,i,o=null!=e?e:n.nullContext||{};return'\t\t\t<div class="category">\n\t\t\t\t<div class="category-title">'+n.escapeExpression((i=null!=(i=t.key||l&&l.key)?i:t.helperMissing,"function"==typeof i?i.call(o,{name:"key",hash:{},data:l}):i))+"</div>\n"+(null!=(s=t.each.call(o,e,{name:"each",hash:{},fn:n.program(6,l,0),inverse:n.noop,data:l}))?s:"")+"\t\t\t</div>\n"},6:function(n,e,t,a,l){var s,i=n.lambda,o=n.escapeExpression;return'\t\t\t\t\t<div class="clickable event'+(null!=(s=(t.compare||e&&e.compare||t.helperMissing).call(null!=e?e:n.nullContext||{},null!=e?e.binding:e,"===",(s=l&&l.root)&&s.activeEvent,{name:"compare",hash:{},fn:n.program(7,l,0),inverse:n.noop,data:l}))?s:"")+'" data-event="'+o(i(null!=e?e.event:e,e))+'" data-binding="'+o(i(null!=e?e.binding:e,e))+'">\n\t\t\t\t\t\t<span class="icons">\n\t\t\t\t\t\t\t<i class="start-icon fa fa-bell-slash"></i>\n\t\t\t\t\t\t\t<i class="stop-icon fa fa-bell"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class="name">'+o(i(null!=e?e.event:e,e))+"</span>\n\t\t\t\t\t</div>\n"},7:function(n,e,t,a,l){return" active"},compiler:[7,">= 4.0.0"],main:function(n,e,t,a,l){var s,i=n.lambda,o=n.escapeExpression,c=null!=e?e:n.nullContext||{};return'<div class="debug-container app-content clearfix">\n\t<div class="left-column">\n\t\t<div class="custom-events-wrapper">\n\t\t\t<div class="title">'+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.debug:s)?s.customEvents:s)?s.active:s,e))+'</div>\n\t\t\t<div class="events">\n\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="category">\n\t\t\t<div class="category-title">'+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.debug:s)?s.customEvents:s)?s.conferences:s,e))+'</div>\n\t\t\t<div class="event" data-binding-before="conference.command.">\n\t\t\t\t'+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.debug:s)?s.customEvents:s)?s.conferencesCommand:s,e))+'\n\t\t\t\t<div class="select-wrapper">\n\t\t\t\t\t<select id="select_conference_command" class="select-conference">\n\t\t\t\t\t\t<option value="none"></option>\n'+(null!=(s=t.each.call(c,null!=e?e.conferences:e,{name:"each",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l}))?s:"")+'\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="event" data-binding-before="conference.event." data-binding-after=".*">\n\t\t\t\t'+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.debug:s)?s.customEvents:s)?s.conferencesEvent:s,e))+'\n\t\t\t\t<div class="select-wrapper">\n\t\t\t\t\t<select id="select_conference_event" class="select-conference">\n\t\t\t\t\t\t<option value="none"></option>\n'+(null!=(s=t.each.call(c,null!=e?e.conferences:e,{name:"each",hash:{},fn:n.program(3,l,0),inverse:n.noop,data:l}))?s:"")+"\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n"+(null!=(s=t.each.call(c,null!=e?e.events:e,{name:"each",hash:{},fn:n.program(5,l,0),inverse:n.noop,data:l}))?s:"")+'\t</div>\n\n\t<div class="right-column">\n\t</div>\n</div>\n\n'},useData:!0}),this.monster.cache.templates.websockets._main["event-line"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(n,e,t,a,l){var s,i=null!=e?e:n.nullContext||{},o=t.helperMissing,c=n.escapeExpression;return'<div class="event-log">\n\t<span class="binding">'+c((s=null!=(s=t.binding||(null!=e?e.binding:e))?s:o,"function"==typeof s?s.call(i,{name:"binding",hash:{},data:l}):s))+'</span>\n\t<span class="time pull-right">'+c((s=null!=(s=t.friendlyDate||(null!=e?e.friendlyDate:e))?s:o,"function"==typeof s?s.call(i,{name:"friendlyDate",hash:{},data:l}):s))+'</span>\n\t<div class="json-viewer"></div>\n</div>'},useData:!0}),this.monster.cache.templates.websockets._main.sampleCode=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(n,e,t,a,l){var s,i=n.lambda,o=n.escapeExpression;return'<div class="sampleCode-container app-content">\n\t'+o(i(null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.sampleCode:s)?s.first:s,e))+"\n\n\t<br/><br/>\n\n\t"+o(i(null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.sampleCode:s)?s.second:s,e))+'\n\n\t<br/>\n\n\t<div class="coding-sample">\n<pre class="prettyprint">\n//'+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.sampleCode:s)?s.snippet:s)?s.initialization:s,e))+"\nvar socket = new WebSocket('http://mysocket.url.com:5555');\n\nsocket.onopen = function(data) {\n  //"+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.sampleCode:s)?s.snippet:s)?s.subscriptionCreation:s,e))+"\n  var subscription = {\n      'action': 'subscribe',\n      'account_id': '11111111111111111111111111111111',\n      'auth_token': '22222222222222222222222222222222',\n      'binding': 'call.CHANNEL_CREATE.*'\n    },\n    //"+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.sampleCode:s)?s.snippet:s)?s.subscriptionToString:s,e))+"\n    subscriptionString = JSON.stringify(subscription);\n\n  //"+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.sampleCode:s)?s.snippet:s)?s.sendSubscription:s,e))+"\n  socket.send(subscriptionString);\n}\n</pre>\n\t</div>\n\n\t"+o(i(null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.sampleCode:s)?s.third:s,e))+'\n\n\t<br/>\n<pre class="prettyprint">\n//'+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.sampleCode:s)?s.snippet:s)?s.onMessage:s,e))+"\nsocket.onmessage = function(event) {\n  var data = JSON.parse(event.data);\n\n  //"+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.sampleCode:s)?s.snippet:s)?s.ifBinding:s,e))+"\n  if(data.binding === 'call.CHANNEL_CREATE.*') {\n    //"+o(i(null!=(s=null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.sampleCode:s)?s.snippet:s)?s.doSomething:s,e))+"\n  }\n};\n</pre>\n\n\t"+o(i(null!=(s=null!=(s=null!=(s=null!=e?e.i18n:e)?s.websockets:s)?s.sampleCode:s)?s.fourth:s,e))+' <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_client_applications">Writing WebSocket client applications</a>.\n</div>\n\n'},useData:!0});